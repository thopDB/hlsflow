# Change input and output details

output_path="thDB/sebi" # Output Path (Same will be pushed in main also)
input_url="https://winter-thunder-0360.belitawhite.workers.dev/?url=aHR0cHMlM0ElMkYlMkZkLWpwMDItemVuLnRlcmFib3guY29tJTJGZmlsZSUyRmRhMjBiNDdkYmZhNjllZTBmZGM5ZjQzMjNlZmZjMWNkJTNGYmt0JTNEZW4tNGQxNjZjMDcxODg3NzYxNTUyNzI3NmVjOWJjZmRlNWQ2ZGM5NjNlZmY4ZjI1ZDFhZGVjNGJlN2E4MTFjNGM2OTc1OGUyMDkzMzYzNGU0YmQlMjZ4Y29kZSUzRDJkNTE2N2I5ZmI0MGY1NjFlY2MyNjE4NWNjZWJjZGZkMGRlZWY2NmUwM2E4ODAxYWUwZjM5ZjJiMTI0Mjk0NDcyMjc4ZGIxMzE3NTc4N2QyZThkMDdmYmI4MWUzYzlmYTBiMjk3NzcwMmQzZTY3NjQlMjZmaWQlM0Q0Mzk5NzE5NzYyNDY2LTI1MDUyOC00MzgwMjE0NTA2NDAwMTclMjZ0aW1lJTNEMTc0MzQ4NDEyOSUyNnNpZ24lM0RGRFRBWFVHRVJMUWxCSFNLZldhb24tRENiNzQwY2NjNTUxMWU1ZThmZWRjZmYwNmIwODEyMDMtc3Z6bnhmUGIlMkJhMkNqWlBXWXVUYkRyQnU4JTJCdyUzRCUyNnRvJTNEMTQ5JTI2c2l6ZSUzRDQ5MDU4MjU3MSUyNnN0YV9keCUzRDQ5MDU4MjU3MSUyNnN0YV9jcyUzRDAlMjZzdGFfZnQlM0Rta3YlMjZzdGFfY3QlM0QxJTI2c3RhX210JTNEMSUyNmZtMiUzRE1IJTJDdGt5JTJDQW55d2hlcmUlMkMlMkNUbTl5ZEdnZ1NHOXNiR0Z1WkElM0QlM0QlMkNhbnklMjZyZWdpb24lM0R0a3klMjZjdGltZSUzRDE3NDMzMzU1ODclMjZtdGltZSUzRDE3NDMzMzU1ODglMjZyZXN2MCUzRC0xJTI2cmVzdjElM0QwJTI2cmVzdjIlM0RybGltJTI2cmVzdjMlM0Q1JTI2cmVzdjQlM0Q0OTA1ODI1NzElMjZ2dWslM0Q0Mzk5MDQ5MjgzMTAxJTI2aXYlM0QwJTI2aHR5cGUlM0QlMjZyYW5kdHlwZSUzRCUyNm5ld3ZlciUzRDElMjZuZXdmbSUzRDElMjZzZWNmbSUzRDElMjZmbG93X3ZlciUzRDMlMjZwa2V5JTNEZW4tYmVmZGFiZmU4OGIyZGE3NDM3NmQ1MjFkM2I3Y2IzNTdmNTA0ZTcwMTkxZmNkZjY1ZGJiYzIxNGM5N2IxNzM5YTgyYTM5MDE5NGQxNGRmYTElMjZzbCUzRDY4MDkxOTc3JTI2ZXhwaXJlcyUzRDE3NDM1MTI5MjklMjZydCUzRHNoJTI2ciUzRDY4MDg1MTY0MSUyNnNoJTNEMSUyNnZiZGlkJTNELSUyNmZpbiUzRFRoZV9JbnZpdGF0aW9uXygyMDIyKV9CUi1SaXBfLV94MjY0Xy1fJTVCVGVsXyUyQl9UYW1fJTJCX0hpbiU1RC5ta3YlMjZydHlwZSUzRDElMjZkcC1sb2dpZCUzRDkwMTc1ODc5NjMyMDAwMjg3MDglMjZkcC1jYWxsaWQlM0QwLjElMjZocHMlM0QxJTI2dHNsJTNEMjAwMCUyNmNzbCUzRDIwMDAlMjZmc2wlM0QtMSUyNmNzaWduJTNEMHh2UTJUaG1yb2NVbWFBSWREJTJCTyUyRlhxRUJ3USUzRCUyNnNvJTNEMCUyNnV0JTNENiUyNnV0ZXIlM0QzJTI2c2VydiUzRDElMjZ1YyUzRDEwMTAxNzU3NjAlMjZ0aSUzRDE0YTMwMTAzODRjMWNhM2MxZmU5NjUzZDI1MDM5YmZhM2Y3MTNlOTlkOWE1M2QwOTMwNWE1ZTEyNzU2NTczMjAlMjZ0dXNlJTNEJTI2cmF3X2FwcGlkJTNEMCUyNm9nciUzRDAlMjZycmVnaW9uJTNEWFZWaSUyNmFkZyUzRCUyNnJlcWxhYmVsJTNEMjUwNTI4X2ZfMWQ3YzM5YmY3NTk5ZDIxZmYyOWRlMzI2MTU4MWM1YWNfLTFfYWUzNWUxZDczZGYxY2MyZTJlNmE0NDZhNThjMjYzM2IlMjZjY24lM0ROTCUyNmJ5JTNEdGhlbWlz" # Input direct file url
input_extension="mkv" # Extension of file url



# Change ffmpeg configurations according to yur need (If you don't know, don't touch)

wget --quiet -O video.$input_extension $input_url
mkdir $output_path

ffmpeg -hide_banner -y -i video.$input_extension \
  -vf scale=w=842:h=480:force_original_aspect_ratio=decrease -c:a aac -ar 48000 -c:v h264 -profile:v main -crf 20 -sc_threshold 0 -g 48 -keyint_min 48 -hls_time 4 -hls_playlist_type vod -b:v 1400k -maxrate 1498k -bufsize 2100k -b:a 128k -hls_segment_filename $output_path/480p_%03d.ts $output_path/480p.m3u8 

rm video.$input_extension
cd $output_path

echo '#EXTM3U
#EXT-X-VERSION:3
#EXT-X-STREAM-INF:BANDWIDTH=1400000,RESOLUTION=842x480
480p.m3u8' > master.m3u8
